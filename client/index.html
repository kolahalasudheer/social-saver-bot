<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0f0f0f" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>ReelSave â€” Your Instagram Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
</head>

<body>

  <!-- ===== SIDEBAR OVERLAY ===== -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <span class="sidebar-logo-icon">ğŸ¬</span>
        <span class="sidebar-logo-text">ReelSave</span>
      </div>
      <button class="sidebar-close" onclick="closeSidebar()">âœ•</button>
    </div>

    <!-- User Profile -->
    <div class="sidebar-profile">
      <div class="profile-avatar" id="sidebarAvatar">U</div>
      <div class="profile-info">
        <div class="profile-name">My Account</div>
        <div class="profile-phone" id="sidebarPhone">WhatsApp User</div>
      </div>
      <div class="profile-online"></div>
    </div>

    <!-- Library -->
    <div class="sidebar-section-label">LIBRARY</div>
    <nav class="sidebar-nav">
      <a class="sidebar-nav-item active" href="#" onclick="setSidebarFilter('all'); return false;">
        <span class="sidebar-nav-icon">âŠ</span>
        <span class="sidebar-nav-text">All Saves</span>
        <span class="sidebar-nav-count" id="sidebarAllCount">0</span>
      </a>
      <a class="sidebar-nav-item" href="#" onclick="setSidebarFilter('starred'); return false;" data-cat="starred">
        <span class="sidebar-nav-icon">â­</span>
        <span class="sidebar-nav-text">Starred</span>
        <span class="sidebar-nav-count" id="sidebarStarredCount">0</span>
      </a>
      <a class="sidebar-nav-item" href="#" onclick="setSidebarSort('newest'); return false;">
        <span class="sidebar-nav-icon">â°</span>
        <span class="sidebar-nav-text">Recent</span>
      </a>
      <a class="sidebar-nav-item" href="#" onclick="setSidebarFilter('random'); return false;">
        <span class="sidebar-nav-icon">ğŸ²</span>
        <span class="sidebar-nav-text">Random Pick</span>
      </a>
    </nav>

    <!-- Buckets -->
    <div class="sidebar-section-label">BUCKETS</div>
    <nav class="sidebar-nav" id="sidebarBuckets">
      <!-- dynamically filled -->
    </nav>

    <!-- Account -->
    <div class="sidebar-section-label">ACCOUNT</div>
    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="#">
        <span class="sidebar-nav-icon">ğŸ‘¤</span>
        <span class="sidebar-nav-text">Profile</span>
      </a>
      <a class="sidebar-nav-item" href="#" onclick="logout(); return false;" style="color: #ef4444;">
        <span class="sidebar-nav-icon">ğŸšª</span>
        <span class="sidebar-nav-text">Logout</span>
      </a>
    </nav>
  </aside>

  <!-- ===== MAIN APP ===== -->
  <div class="app-shell">

    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <button class="hamburger" onclick="openSidebar()" aria-label="Menu">
          <span></span><span></span><span></span>
        </button>
        <div class="logo">
          <span class="logo-icon">ğŸ¬</span>
          <span class="logo-text">ReelSave</span>
        </div>
        <div class="header-right">
          <button class="header-icon-btn" aria-label="Notifications">ğŸ””</button>
          <div class="header-avatar" id="headerAvatar">R</div>
        </div>
      </div>
    </header>

    <!-- Search Bar -->
    <div class="search-wrap">
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" id="searchInput" class="search-input" placeholder="Search reels, captions, usernames..." />
      </div>
    </div>

    <!-- WhatsApp LIVE Banner -->
    <div class="wa-banner">
      <div class="wa-banner-left">
        <div class="wa-icon">ğŸ’¬</div>
        <div>
          <div class="wa-title">WhatsApp Bot Active</div>
          <div class="wa-sub">Send any Instagram reel link to +1 (415) 523-8886 to save it instantly.</div>
        </div>
      </div>
      <span class="wa-live"><span class="live-dot"></span>LIVE</span>
    </div>

    <!-- Stats Row -->
    <div class="stats-row" id="statsRow">
      <div class="stat-card">
        <div class="stat-label">TOTAL SAVES</div>
        <div class="stat-value" id="statTotal">â€”</div>
        <div class="stat-sub" id="statWeek">this week</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">TOP BUCKET</div>
        <div class="stat-value" id="statTopCat">â€”</div>
        <div class="stat-sub" id="statTopCount">saves</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">COMPLETED</div>
        <div class="stat-value" id="statDone">â€”</div>
        <div class="stat-sub">fully analysed</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">CATEGORIES</div>
        <div class="stat-value" id="statCats">â€”</div>
        <div class="stat-sub">buckets</div>
      </div>
    </div>

    <!-- Section Header w/ Filter & Sort -->
    <div class="section-header">
      <h2 class="section-title">All Saves</h2>
      <div class="section-controls">
        <button class="control-btn" id="filterToggleBtn" onclick="toggleFilterDropdown()">
          <span>âš™ï¸ Filter</span>
          <span class="active-dot hidden" id="filterActiveDot"></span>
        </button>
        <button class="control-btn" id="sortBtn" onclick="toggleSort()">Sort: Latest â†“</button>
      </div>
    </div>

    <!-- Unified Filter Dropdown Panel -->
    <div class="filter-dropdown-wrap">
      <div class="filter-panel hidden" id="filterPanel">
        <div class="filter-section">
          <div class="filter-section-title">By Category</div>
          <div class="filter-grid">
            <button class="f-pill active" data-cat="all">All</button>
            <button class="f-pill" data-cat="Jobs">ğŸ’¼ Jobs</button>
            <button class="f-pill" data-cat="Coding">ğŸ‘¨â€ğŸ’» Coding</button>
            <button class="f-pill" data-cat="Gym">ğŸ‹ï¸ Gym</button>
            <button class="f-pill" data-cat="Cooking">ğŸ³ Cooking</button>
            <button class="f-pill" data-cat="Gaming">ğŸ® Gaming</button>
            <button class="f-pill" data-cat="Tech">ğŸ’» Tech</button>
            <button class="f-pill" data-cat="Finance">ğŸ’° Finance</button>
            <button class="f-pill" data-cat="Education">ğŸ“š Education</button>
            <button class="f-pill" data-cat="Motivation">ğŸ”¥ Motivation</button>
            <button class="f-pill" data-cat="Business">ğŸ’¼ Business</button>
            <button class="f-pill" data-cat="Entertainment">ğŸ­ Entertainment</button>
            <button class="f-pill" data-cat="Lifestyle">âœ¨ Lifestyle</button>
            <button class="f-pill" data-cat="Other">ğŸŒ€ Other</button>
          </div>
        </div>

        <div class="filter-section">
          <div class="filter-section-title">By Intent</div>
          <div class="filter-grid">
            <button class="i-pill active" data-intent="all">Any Intent</button>
            <button class="i-pill" data-intent="educational">ğŸ“– Educational</button>
            <button class="i-pill" data-intent="promotional">ğŸ’° Promotional</button>
            <button class="i-pill" data-intent="informational">ğŸ’¡ Informational</button>
            <button class="i-pill" data-intent="entertainment">ğŸ­ Entertainment</button>
            <button class="i-pill" data-intent="inspirational">ğŸ”¥ Inspirational</button>
            <button class="i-pill" data-intent="satirical/parody">ğŸ¤¡ Satire/Parody</button>
            <button class="i-pill" data-intent="personal">ğŸ‘¤ Personal</button>
          </div>
        </div>

        <div class="filter-section">
          <div class="filter-section-title">By Time</div>
          <div class="filter-grid">
            <button class="d-pill active" data-date="all">ğŸ“… All Time</button>
            <button class="d-pill" data-date="today">Today</button>
            <button class="d-pill" data-date="yesterday">Yesterday</button>
            <button class="d-pill" data-date="week">This Week</button>
            <button class="d-pill" data-date="month">This Month</button>
          </div>
        </div>

        <div class="filter-footer">
          <button class="clear-filters-btn" onclick="clearAllFilters()">Clear All Filters</button>
        </div>
      </div>
    </div>

    <!-- Scrollable content area -->
    <div class="content-scroll">
      <main class="feed" id="feed">
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
      </main>

      <!-- Empty State -->
      <div class="empty-state hidden" id="emptyState">
        <div class="empty-icon">ğŸ“­</div>
        <h3 class="empty-title">No reels found</h3>
        <p class="empty-sub">Send an Instagram reel link on WhatsApp to save it here.</p>
      </div>

      <!-- Error State -->
      <div class="error-state hidden" id="errorState">
        <div class="empty-icon">âš ï¸</div>
        <h3 class="empty-title">Couldn't load reels</h3>
        <p class="empty-sub">Make sure the server is running and refresh.</p>
        <button class="retry-btn" onclick="loadReels()">Retry</button>
      </div>
    </div><!-- end content-scroll -->



    <!-- Reel Details Modal -->
    <div class="reel-modal-overlay" id="reelModalOverlay" onclick="closeReelModal()">
      <div class="reel-modal" id="reelModal" onclick="event.stopPropagation()">

        <div class="rm-header">
          <div class="rm-creator" id="rmCreator">@username</div>
          <button class="rm-close" onclick="closeReelModal()">âœ•</button>
        </div>

        <div class="rm-content">
          <div class="rm-hero">
            <img src="" alt="Thumbnail" id="rmThumbnail" referrerpolicy="no-referrer"
              onerror="this.style.display='none'" />
            <div class="rm-hero-overlay">
              <span class="rm-play-icon">â–¶</span>
            </div>
          </div>

          <div class="rm-body">
            <div class="rm-section">
              <span class="rm-label">AI INSIGHT</span>
              <div class="rm-insight-card">
                <h3 class="rm-title" id="rmTitle">AI Summary goes here</h3>
              </div>
            </div>

            <div class="rm-section">
              <span class="rm-label">CATEGORIES & INTENT</span>
              <div class="rm-badges" id="rmBadges">
                <!-- Injected Badges -->
              </div>
            </div>

            <div class="rm-section">
              <span class="rm-label">ORIGINAL CAPTION</span>
              <div class="rm-caption" id="rmCaption">Original caption goes here...</div>
            </div>

            <div class="rm-section">
              <span class="rm-label">TOPICS</span>
              <div class="rm-tags" id="rmTags">
                <!-- Injected Tags -->
              </div>
            </div>

            <div class="rm-section rm-reminder-section">
              <span class="rm-label">SET REMINDER ğŸ””</span>
              <div class="rm-reminder-flex">
                <input type="datetime-local" id="rmReminderInput" class="rm-reminder-input" />
                <button class="rm-reminder-btn" id="rmSetReminderBtn">Notify Me</button>
              </div>
              <div id="rmReminderStatus" class="rm-reminder-status hidden"></div>
            </div>
          </div>
        </div>

        <div class="rm-footer">
          <button class="rm-cta" id="rmCtaBtn">Watch on Instagram</button>
          <button class="rm-delete-btn" id="rmDeleteBtn">Delete</button>
        </div>

      </div>
    </div>

    <!-- ===== AUTH MODAL (OTP) ===== -->
    <div class="auth-modal-overlay" id="authModalOverlay">
      <div class="auth-modal">
        <div class="auth-header">
          <div class="auth-logo">ğŸ¬ ReelSave</div>
          <h2 class="auth-title">Secure Login</h2>
          <p class="auth-sub">Enter your WhatsApp phone number to access your private dashboard.</p>
        </div>

        <!-- Step 1: Phone Number -->
        <div id="authStepPhone">
          <div class="auth-input-group">
            <label class="auth-label">Phone Number</label>
            <input type="tel" id="authPhoneInput" class="auth-input" placeholder="Ex : +919876543210" />
            <p class="auth-hint">Include your country code (e.g. +91 for India)</p>
          </div>
          <button class="auth-btn" id="authRequestOtpBtn">Send Verification Code</button>
        </div>

        <!-- Step 2: OTP Code -->
        <div id="authStepOtp" class="hidden">
          <div class="auth-input-group">
            <label class="auth-label">Verification Code</label>
            <input type="number" id="authOtpInput" class="auth-input" placeholder="0000" maxlength="4" />
            <p class="auth-hint">Enter the 4-digit code sent to your WhatsApp</p>
          </div>
          <button class="auth-btn" id="authVerifyOtpBtn">Verify & Enter</button>
          <button class="auth-back-btn" id="authBackBtn">â† Use different number</button>
        </div>

        <div id="authError" class="auth-error hidden"></div>
      </div>
    </div>

  </div><!-- end app-shell -->

  <script src="app.js"></script>
</body>

</html>